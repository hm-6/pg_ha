vrrp_instance VI_PG {
  state BACKUP
  interface {{ keepalived_interface }}
  virtual_router_id {{ virtual_router_id }}
  priority {{ keepalived_priority }}
  advert_int 1

  {% if vrrp_peers|length > 0 %}
  unicast_src_ip {{ vrrp_src_ip }}
  unicast_peer {
    {% for p in vrrp_peers %}
    {{ p }}
    {% endfor %}
  }
  {% endif %}

  authentication {
    auth_type PASS
    auth_pass {{ keepalived_auth_pass }}
  }

  virtual_ipaddress {
    {{ vip_ip }}/{{ vip_prefix }}
  }

  track_process {
    haproxy
  }
}
